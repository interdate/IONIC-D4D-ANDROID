<!--
  Generated template for the Dialog page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

    <ion-navbar>
        <ion-title>edit-profile</ion-title>
    </ion-navbar>
    <!--<ion-title><button></button><ion-icon name="arrow-round-back"></ion-icon></button></ion-title>-->
</ion-header>

<ion-content id="dialog" padding>
    <div (click)="back()" class="back-btn">
        <ion-icon name="ios-arrow-back"></ion-icon>
    </div>
    <!--<div class="no_results" *ngIf="messages">{{ texts?.no_results }}</div>-->
    <ion-card>
        <ion-item>
            <!--<ion-avatar (click)="toProfilePage()" item-left>
            </ion-avatar>-->
            <p class="dialog-avatar" (click)="toProfilePage()"
               [ngStyle]="{ 'background-image': 'url(' +user.mainImage?.url + ')'}">Chat With {{user.nickName}}</p>

        </ion-item>
        <p></p>
    </ion-card>
    <div class="messages">
        <ion-card [ngClass]="{'other-msg': reciver_id == msg?.from }" *ngFor="let msg of messages"
                  class="usr_msg msg-item">
            <ion-grid>
                <ion-row>
                    <ion-col width-75>
                        <ion-card-content item-left>
                            <span *ngIf="msg.text == 'Click here to buy subscription or use your free point to read this message'">
                            Click here to <a (click)=subscription()>buy subscription</a></span><span *ngIf="userHasFreePoints && msg.text == 'Click here to buy subscription or use your free point to read this message'"> or
                            use your  <a (click)=useFreePointToReadMessage(msg)>free point</a> to read this message</span>
                        </ion-card-content>
                        <ion-card-content
                                *ngIf="msg.text != 'Click here to buy subscription or use your free point to read this message'"
                                [innerHTML]="msg.text" item-left>
                        </ion-card-content>
                    </ion-col>
                    <ion-col width-25>
                        <ion-card-content class="date" item-right>
                            {{msg.date}} {{msg.time}}
                            <!--<ion-icon *ngIf="user?.id == msg.from" name="checkmark"></ion-icon>-->
                            <ion-icon *ngIf="reciver_id != msg.from && msg.isRead == '0'" name="done-all"></ion-icon>
                            <ion-icon class="received" *ngIf="reciver_id != msg.from && msg.isRead == '1'" name="done-all"></ion-icon>
                            <ion-icon *ngIf="reciver_id != msg.from && msg.isRead =='2'"
                                      name="checkmark"></ion-icon>
                        </ion-card-content>
                    </ion-col>
                </ion-row>
            </ion-grid>
        </ion-card>
    </div>

</ion-content>
<ion-footer>
    <ion-toolbar id="form-dialog">
        <textarea id="dialog-msg" [(ngModel)]="message" placeholder="" item-left></textarea>
        <button class="send-msg" (click)="sendMessage()" ion-button color="danger">send</button>
    </ion-toolbar>

    <ion-navbar class="footerMenu">
        <ion-title></ion-title>
    </ion-navbar>

</ion-footer>
